---
title: API キー (API key)
tags: [authentication, api]
description: API キーは、API にアクセスする際にクライアントを認証 (Authentication) し、認可 (Authorization) するために使用される一意の識別子です。それは、クライアントの身元を確認し、特定のリソースやサービスへのアクセスを許可するために API リクエストに含める秘密のトークンとして機能します。API キーは主にサーバー間通信や公開データへのアクセスに使用されます。
---

## API キーとは何ですか？

API キーは、呼び出しアプリケーションやサービスを識別し、認可 (Authorization) するために使用されます。通常、回転されるまで長期間有効で静的であり、固定された一連の権限を持っています。主にサーバー間通信や公開データへのアクセスに使用され、これらのトークンは一般に特定のユーザーを表しません。

## API キーはどのように機能しますか？

API キーは API プロバイダによって生成され、認可 (Authorization) されたユーザーと共有される長い文字列です。このキーは API にアクセスする際にリクエストヘッダに含める必要があります。API キーは基本的なセキュリティニーズに対してシンプルで効果的です。たとえば、Google Maps API や AWS などの一般的なサービスは、アクセスを制御し使用状況を監視するために API キーを提供しています。

```java
curl -GET https://api.example.com/endpoint -H "Authorization: api-key YOUR_API_KEY"
```

API キーは、OAuth や JWT などの他の API 認証 (Authentication) 方式ほど効果的ではありませんが、それでも多くの API プロデューサーにとって使用状況を監視するのに重要な役割を果たします。なぜなら、API を保護するための最も簡単で広く使用されている方法だからです。

## 長所と短所は何ですか？

### 長所

- 導入が簡単: API キーは簡単に導入でき、使用も簡単です。リクエストヘッダにキーを添付することで、開発者やクライアントにとって理解しやすく利用しやすい方法です。
- 監視が容易: API キーは監視が容易です。各キーの使用状況を追跡し、必要に応じて取り消しできます。
- 効果的なレート制限: API キーはレート制限に効果的です。キーごとにリクエスト数の制限を設けることで不正使用を防ぐことができます。
- 非機密データに適している: セキュリティ要件が低い非機密データや公開 API に適しています。

### 短所

- 限られたセキュリティ: API キーはクライアント側アプリケーションに対して、十分に安全ではなく、しばしば機械間通信に使用されます。
- ユーザー認証 (Authentication) に不向き: API キーはアプリケーションやシステムに結びついており、個々のユーザーに結びついていないため、特定のユーザーを識別したり、その行動を追跡したりするのが難しいです。
- トークン有効期限がない: API キーは通常静的で期限切れになりません。キーが漏洩した場合、再生成されない限り無期限に悪用される可能性があります。

## API キーのユースケースは何ですか？

- サービス間通信: API キーはアプリケーションが CLI を通じて API に直接通信する必要があるシナリオに適しています。例: OpenAI API の呼び出し。
- 公共 API: API を公開する場合、API キーはアクセス制御方法として簡潔です。
- 簡略化されたセットアップ: 特に開発段階において、簡単でシンプルな認証 (Authentication) ニーズに適しています。Machine-to-machine 認証 (Authentication) とは異なり、API キーは事前のクライアント登録を必要とせず、アクセストークン (Access Token) に交換する必要もありません。ただリクエストのパラメータとして API キーを渡すだけで、それは単に機能します。

現実のシナリオでは、製品統合を構築する際の最も一般的な目的は、製品統合です。以下は一つの典型的なユースケースです。

### 例: Stripe との統合

Stripe は異なるプラットフォームやアプリケーションとの安全な統合のために API キーを使用します。これらのキーを作成、表示、削除、および管理できます。API キーを使用することで、Stripe のチェックアウトや請求機能を製品に統合できます。

![Stripe-integration-API keys.png](https://uploads.strapi.logto.io/Stripe_integration_API_keys_cb6a2bc679.png)

## パーソナルアクセストークン (PAT) とマシン間通信 (M2M) の違いは何ですか？

API キーについて話す際、パーソナルアクセストークンやマシン間通信も同様に言及されることがあります。なぜなら、これらはすべて CLI コマンドを通じて API リソースにプログラム的にアクセスしたり、バックエンドサービス間の通信を確立したりできるからです。

### パーソナルアクセストークン (PATs)

パーソナルアクセストークンは文字列ですが、***特定のユーザー*** の身元と権限を表し、認証 (Authentication) またはログインが成功すると動的に生成され、通常制限された期間が設定されていますが更新可能です。ユーザー固有のデータや機能への細かいアクセス制御を提供し、CLI ツール、スクリプト、または個人の API アクセスに一般的に使用されます。主な違いは、より特定的でユーザー固有のアクションに使用されることです。

### マシン間通信 (M2M)

M2M 通信は、より広い意味で、人間の関与なしにデバイスが自動的にデータを交換することです。

OIDC (または OAuth 2.0) のコンテキストにおいて、M2M アプリケーションは [OAuth 2.0 RFC 6749 プロトコル](https://datatracker.ietf.org/doc/html/rfc6749) で定義されているクライアントクレデンシャルフローを使用し、同様の標準プロトコルをサポートします。それは通常、クライアントアプリケーション (マシンまたはサービス) が、自身またはユーザーに代わってリソースにアクセスすることを含みます。信頼されたクライアントのみがバックエンドサービスにアクセスできるシチュエーションに最適です。

<SeeAlso slugs={["machine-to-machine"]} />
