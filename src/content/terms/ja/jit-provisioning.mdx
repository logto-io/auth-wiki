---
title: 即時プロビジョニング (Just-in-time provisioning, JIT)
tags: [authentication, authorization]
description: 即時プロビジョニング (JIT) は、ユーザーがシステムやアプリケーションに初めてアクセスしようとする際に、ユーザーアカウントが動的かつ自動的に作成される、アイデンティティおよびアクセス管理 (IAM) プロセスです。このアプローチは、オンボーディングプロセスを合理化し、必要時にのみユーザーアカウントが作成されることを保証することで、管理上の負担を減らし、セキュリティを向上させます。
---

## 即時プロビジョニングとは？

SaaS B2B アプリを構築し、メンバーがワークスペース (テナント) に簡単に参加できるようにするためのメンバーシップ機能をサポートしたいと考えている場合は、以下の表のような機能が必要になるかもしれません。その中で即時プロビジョニングはプロセスを合理化するのに役立つものの一つです。

| 機能 | フロー |
| --- | --- |
| 管理者による招待の開始 | ユーザーは組織に参加するためのメール招待を受け取ることができます。 |
| API を通じたユーザー作成またはインポート | ユーザーはあらかじめ作成されたユーザーアカウントを使用して組織に参加することができます。 |
| 即時プロビジョニング | 初めてアプリにログインしたユーザーが組織に参加できます。 |
| ディレクトリ同期 (例: SCIM) | アプリでユーザーを事前プロビジョニングするために IdP のディレクトリ同期機能を使用します。 |

**即時プロビジョニング (JIT)** は、ユーザーが初めてシステムにサインインする際にユーザーアカウントを即座に作成するために使用される、アイデンティティおよびアクセス管理システムのプロセスです。ユーザーのために事前にアカウントをプロビジョニングするのではなく、ユーザーが認証する際に必要なユーザーアカウントを動的に作成および構成します。即時プロビジョニングは効率性、管理の関与の不要性、自動化された組織メンバーシップなどの特徴を持つ人気のある機能です。

## 即時プロビジョニングのユースケースは何ですか？

これらのケースは、マルチテナントアーキテクチャ、Enterprise SSO、企業との連携、またはチームオンボーディング機能が必要な B2B アプリを構築する際によく見られます。以下にお客様が直面する可能性のあるサンプルシナリオを示します。

### 急速なオンボーディング

頻繁な採用や急速な成長を経験しているクライアントは、即時プロビジョニングを使用して新しい従業員のためのユーザーアカウントを迅速に設定できます。ここでの例です：

Sarah は Company SuperFantasy の新しい従業員で、Okta を Enterprise Identity Provider として使用しています。HR チームが彼女を Okta にビジネスアイデンティティとして追加します。Sarah がこのメールを使って初めて企業使用の生産性アプリ "Smartworkspace" にサインインすると、システムは自動的にアカウントを作成し、会社のワークスペース内で適切な役割をプロビジョニングします。このようにして、Sarah も SuperFantasy の HR チームもアカウント作成や役割の割り当てのために複数のステップを踏む必要がありません。

### 合併、買収、および臨時労働者

他社との合併や買収を経験しているクライアントは、即時プロビジョニングを使用して、多くの新しいユーザーへのアクセス付与プロセスを簡素化することができます。もう一つの例を考えてみましょう、

Peter は最近 SuperFantasy に買収された MagicTech で働いています。MagicTech は Enterprise SSO を持たない小規模な組織ですが、Peter はすでにビジネスアカウントを持っている Smartworkspace を使用しています。

HR チームは Peter を Okta に追加できます。Peter が初めて Okta を通じて Smartworkspace にログインしたとき、システムは自動的に彼の既存のビジネスアカウントをリンクし、SuperFantasy に適切なアクセスを付与します。

上記のシナリオは、JIT 機能を実装するのに理想的です。

## これは SAML および Enterprise SSO に特化していますか？

即時プロビジョニング (JIT) は通常、SAML 認証におけるシングルサインオン (SSO) と関連付けられていますが、SAML に限ったものではありません。JIT プロビジョニングは、OAuth 2.0 や OpenID Connect などの他の認証プロトコルでも使用でき、必ずしも Enterprise SSO のセットアップを必要としません。

たとえば、メールベースの JIT プロビジョニングは、ユーザーをメールドメインに基づいてワークスペースに自動的に追加することで、チームオンボーディングを合理化できます。これは、Enterprise SSO を購入および管理するための予算とリソースが不足している組織に特に有用です。

JIT プロビジョニングの基本的な考え方は、ユーザーが特定のプロトコルを問わず、サービスにアクセスしようとする際にユーザーアカウントの作成または更新を自動化することです。

## 新規または既存のアプリユーザーに適用されますか？

即時プロビジョニング (JIT) は、通常、アプリへの最初のアクセス試行を指します。ただし、異なる製品はこの機能を異なる見方で捉えています。一部の製品は JIT プロビジョニングを ID およびアカウント作成のみに使用し、他の製品は再プロビジョニングや属性同期などの即時アカウント更新も含めます。

自動ユーザー作成に加えて、SAML JIT プロビジョニングでは、プロビジョニングの一環としてグループメンバーシップの付与と取り消しも行えます。また、Identity Provider (IDP) ユーザーストアの属性と Service Provider (SP) ストア内の属性を同調させるためにプロビジョニング済みのユーザーを更新することもできます。

既存のユーザーのサインインシナリオを考慮したい場合は、JIT システムとともに堅牢なプロビジョニングシステムを持っていることを確認してください。たとえば、

- **競合の解決**: あなたのシステムは、アカウントがすでに存在し、IdP によって JIT プロセス中に提供された情報と異なる情報を持つ場合に競合を処理する戦略を持っている必要があります。これは、組織のポリシーおよび IdP 設定の詳細な制御を必要とする場合があります。
- **監査証跡**: 新しいアカウント作成と既存のアカウントの JIT プロセスによる更新の両方のログを保持することが、セキュリティとコンプライアンスの理由で重要です。
- **パフォーマンス**: JIT プロビジョニングは迅速に行われますが、特に既存のユーザーに対してサインイン時に情報を更新する場合、その影響を考慮してください。
- **データの一貫性**: JIT プロビジョニングプロセスが、特に既存のユーザーアカウントを更新する際にデータの一貫性を維持することを確認してください。

## JIT と SCIM の違いは何ですか？

SCIM は、異なるシステムやドメイン間でのユーザーアイデンティティ管理を簡素化するために設計されたオープンスタンダードプロトコルです。これはディレクトリ同期シナリオで一般的に使用されます。

JIT と SCIM の主な違いは、JIT はユーザーのサインイン試行中にアカウントを作成するのに対し、SCIM はユーザーのログイン試行とは無関係に、オフラインでの自動プロセスを通じてユーザーをプロビジョニングできることです。

これは、JIT が新しいユーザーのオンボーディングに焦点を当てるのに対し、SCIM がユーザーのフルライフサイクル管理に焦点を当てていることを意味します。

さらに、JIT はしばしば SAML の拡張機能であり、システム間で標準化された実装が欠けているのに対し、SCIM はアイデンティティ管理のためのよく定義された標準化されたプロトコル [RFC 7644](https://datatracker.ietf.org/doc/html/rfc7644) です。

一部の大規模な組織は、自社のシステムと統合する SCIM をアカウントプロビジョニングに使用します。これには非常に複雑で、場合によっては異なるケースバイケースの対応が必要です。これらの組織はしばしば、プロビジョニングシステムが自動化されたプロセスと管理者の手動関与の両方を含むものになっています。

<Resources urls={['https://blog.logto.io/jit-provisioning']} />
