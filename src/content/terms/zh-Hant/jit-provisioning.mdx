---
title: 即時 (JIT) 供應 (Just-in-time provisioning)
tags: [authentication, authorization]
description: 即時 (JIT) 供應是一種身份和存取管理 (IAM) 過程，當使用者首次嘗試存取系統或應用程式時，動態和自動地創建使用者帳戶。這種方法有助於簡化入職過程，並確保只有在需要時才創建使用者帳戶，減少管理負擔並提高安全性。
---

## 什麼是即時供應？

如果你正在開發一個 SaaS B2B 應用並想支持會員功能，允許會員輕鬆加入你的工作空間 (租戶)。你可能需要下表中的功能，而即時供應是其中之一，幫助簡化流程。

| 功能 | 流程 |
| --- | --- |
| 管理員發起的邀請 | 使用者可以收到一封電子郵件邀請以加入組織。 |
| 通過 API 創建或導入使用者 | 使用者可以使用預先創建的使用者帳戶加入組織。 |
| 即時供應 | 第一次登錄應用的使用者可以加入組織。 |
| 目錄同步（如 SCIM） | 使用身份提供者 (IdP) 的目錄同步功能在應用中預先供應使用者。 |

**即時 (JIT) 供應**是一個在身份和存取管理系統中使用的過程，當使用者第一次登入系統時動態地創建使用者帳戶。JIT 供應不像預先供應帳戶，而是在使用者認證時動態創建並配置必要的使用者帳戶。即時供應是一個受歡迎的功能，具有其自身的特點，例如效率高，無需管理參與，自動化組織會員資格等。

## 即時供應的使用案例是什麼？

這些案例在構建涉及多租戶架構、企業單點登入 (Enterprise SSO)、與企業合作或需要團隊入職功能的 B2B 應用時很常見。以下是客戶可能遇到的一些示例場景。

### 快速入職

若有一位客戶經歷頻繁招聘或快速增長，則可使用 JIT 供應快速為新員工設置使用者帳戶。以下是一個示例：

Sarah 是 SuperFantasy 公司的新員工，該公司使用 Okta 作為企業身份提供者。人力資源團隊只需將她的商業身份資料加入 Okta。當 Sarah 首次使用此電子郵件登入名為 Smartworkspace 的公司生產力應用時，系統會自動創建帳戶並為她在公司工作空間中指定適當的角色。這樣，Sarah 和 SuperFantasy 的人力資源團隊都不需要經過多個步驟來創建帳戶和指派角色。

### 兼併、收購和臨時工

如果某客戶遇到公司兼併或收購，JIT 供應可以簡化流程，為許多新使用者提供存取獲得公司的系統。讓我們看另一個例子，

Peter 是 MagicTech 的員工，該公司最近被 SuperFantasy 收購。MagicTech 是一家較小的組織，沒有企業單點登入 (Enterprise SSO)，但也使用 Smartworkspace，並且 Peter 已經擁有商業帳戶。

人力資源團隊可將 Peter 加入 Okta。當 Peter 首次通過 Okta 登錄 Smartworkspace 時，系統會自動連接他的現有商業帳戶並授予 SuperFantasy 的適當存取權限。

上述場景是實現 JIT 功能的理想情況。

## 它是否特定於 SAML 和企業單點登入 (Enterprise SSO)？

即時 (JIT) 供應通常與 SAML 驗證中的單點登入 (SSO) 關聯，但不僅限於 SAML。JIT 供應還可以與其他驗證協議一起使用，如 OAuth 2.0 和 OpenID Connect，並且不一定需要企業單點登入 (Enterprise SSO) 設置。

例如，基於電子郵件的 JIT 供應可以通過基於電子郵件域自動將使用者添加到工作空間來簡化團隊入職。這對缺乏預算和資源來購買和管理企業單點登入的組織特別有用。

JIT 供應的基本理念是，自動化在使用者首次嘗試存取服務時創建或更新使用者帳戶，無論使用何種具體協議。

## 它適用於應用的新增使用者還是現有使用者？

即時 (JIT) 供應通常指的是首次嘗試進入應用的情況。然而，不同的產品對此功能的看法不同。一些產品僅將 JIT 供應用於身份和帳戶創建，而其他產品還包括即時帳戶更新，如重新供應和屬性同步。

除了自動創建使用者之外，SAML JIT 供應允許在供應過程中授予和撤銷組的會員資格。它還可以更新已供應的使用者，保持其在服務提供者 (SP) 存儲區的屬性與身份提供者 (IDP) 用戶存儲區屬性同步。

如果你願意考慮後續的現有使用者登錄情景，請確保你的 JIT 系統配備健全的供應系統。例如，

- **衝突解決**：如果在 JIT 過程中，身份提供者提供的信息與現有帳戶有所不同，你的系統應該有處理衝突的策略。這可能需要詳細控制你組織的政策和身份提供者配置。
- **審核追踪**：維護通過 JIT 過程創建的帳戶和更新現有帳戶的日誌以滿足安全和合規需求是很重要的。
- **性能**：雖然 JIT 供應速度快，但要考慮對登錄時間的潛在影響，特別是對於如果你正更新使用者信息的現有使用者。
- **數據一致性**：確保你的 JIT 供應過程中保持數據一致性，尤其是在更新現有使用者帳戶時。

## JIT 和 SCIM 之間的區別是什麼？

SCIM 是一種開放標準協議，旨在簡化和自動化跨不同系統與域的身份管理。它在目錄同步場景中常被使用。

JIT 與 SCIM 的主要區別在於 JIT 是在使用者嘗試登入時創建帳戶，而 SCIM 可以通過一個不依賴於使用者登入嘗試的離線自動過程來供應使用者。

這意味着 JIT 專注於新使用者入職，而 SCIM 則專注於用戶全生命周期管理。

此外，JIT 通常是 SAML 的一個擴展，缺乏跨系統的標準化實施，而 SCIM 是一個定義良好的標準化協議 [RFC 7644](https://datatracker.ietf.org/doc/html/rfc7644) 用於身份管理。

一些較大的組織使用 SCIM 進行帳戶供應，並將其集成到他們自己的系統中。這可能非常複雜並因案例而異。這些組織通常有一個包含自動化流程和手動管理介入的供應系統。

<Resources urls={['https://blog.logto.io/jit-provisioning']} />
